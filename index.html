<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>YGOPro Puzzle Editor</title>
	<link href="stylesheets/bootstrap.min.css" rel="stylesheet" type="text/css" />
	<link href="stylesheets/jquery-ui-1.9.2.min.css" rel="stylesheet" type="text/css" />
	<link href="stylesheets/style.css" rel="stylesheet" type="text/css" />
	<script src="javascripts/jquery-1.8.3.min.js" type="text/javascript"></script>
	<script src="javascripts/bootstrap.min.js" type="text/javascript"></script>
	<script src="javascripts/jquery.tmpl.min.js" type="text/javascript"></script>
	<script src="javascripts/jquery-ui-1.9.2.min.js" type="text/javascript"></script>
	<script src="javascripts/tablecloth.js" type="text/javascript"></script>
	<script src="javascripts/main.js" type="text/javascript"></script>
	<script src="javascripts/drag.js" type="text/javascript"></script>
	<script src="javascripts/download.js" type="text/javascript"></script>
	<script src="javascripts/upload.js" type="text/javascript"></script>
	<script src="javascripts/ygo.js" type="text/javascript"></script>
	<script src="javascripts/popmenu.js" type="text/javascript"></script>
	<script src="javascripts/setting.js" type="text/javascript"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/sql.js/1.6.2/sql-wasm.js"></script>
	<script src="javascripts/carddatabase.js" type="text/javascript"></script>

	<script type="text/javascript">
		$(document).ready(function () {
			setPageLabel();
			document.getElementById('keyword').focus();
			var dragImage = document.getElementById('DragImage');
			dragImage.style.display = "none";
			var download = document.getElementById('downloadButton');
			download.onclick = downloadURL;
			var setting = document.getElementById('settingButton');
			setting.onclick = settings;
			initField();
			search();
		});
	</script>

	<script type="text/javascript">
		if (window.navigator.userAgent.toLowerCase().indexOf("firefox") > 0) { //firefox innerText define
			HTMLElement.prototype.__defineGetter__("innerText",
				function () {
					var anyString = "";
					var childS = this.childNodes;
					for (var i = 0; i < childS.length; i++) {
						if (childS[i].nodeType == 1)
							anyString += childS[i].tagName == "BR" ? '\n' : childS[i].innerText;
						else if (childS[i].nodeType == 3)
							anyString += childS[i].nodeValue;
					}
					return anyString;
				}
			);
			HTMLElement.prototype.__defineSetter__("innerText",
				function (sText) {
					this.textContent = sText;
				}
			);
		}
	</script>

	<script type="text/x-jquery-tmpl" id="page-tmpl">
	Page ${current_page} / Total ${page_num} Pages
</script>
	<script type="text/x-jquery-tmpl" id="field-tmpl">
	<div class="${location}" id="${player}_${location}_${place}" style="top:${top}px; left:${left}px;"></div>
</script>
	<script type="text/x-jquery-tmpl" id="thumb-tmpl">
	<div class='thumb' style="top:${top}px; left:${left}px; right:${right}px; bottom:${bottom}px;cursor:pointer;" >
		<img class="thumbImg" src='${card_img_thumb_url}${card_info.card_id}.jpg'/>
		<img class="equipImg" src='images/equip.png' style="display: none"/>
		<img class="targetImg" src='images/target.png' style="display: none"/>
	</div>
</script>
	<script type="text/x-jquery-tmpl" id="label_field-tmpl">
	<label class=${type} >${text}</label>
</script>
	<script type="text/x-jquery-tmpl" id="sortable-tmpl">
	<li class="ui-state-default"><img class='thumbImg' style='cursor:move;' src='${card_img_thumb_url}${card_info.card_id}.jpg' onmouseover="showDetail(${card_info.card_id})"/></li>
</script>
	<script type="text/x-jquery-tmpl" id="CounterSelector-tmpl">
	<div class="CounterSelector">
		Type:
		<select class="select">
		{{each counters}}
			{{if $value.code==_code}}
				<option value="${$value.code}" selected="selected">${$value.str}</option>
			{{else}}
				<option value="${$value.code}">${$value.str}</option>
			{{/if}}
		{{/each}}
		</select>
		Number:
		<input class="spinner" onkeydown="return checkNums()" value="${_number}"/>
		<button class="btn btn-danger" onclick="delCounterSelector()">Delete</button>
	</div>
</script>
	<script type="text/x-jquery-tmpl" id="HintMsg-tmpl">
	<div class="HintMsg">
		<input type="text" class="text ui-widget-content ui-corner-all"  value="${msg}"/>
		<button class="btn btn-danger" onclick="delHintMsg()">Delete</button>
	</div>
</script>
</head>

<body>
	<img id="DragImage" src="images/unknow.jpg" alt="" />

	<div id="header">
		<h1>YGOPro Puzzle Editor</h1>
	</div>
	<div id="LPbar">
		<input id="Player_LP" type="text" placeholder="PlayerLP" maxLength=9 value="8000"
			onkeydown="return checkNums()" />

		<input id="AI_LP" type="text" placeholder="AILP" maxLength=9 value="8000" onkeydown="return checkNums()" />
	</div>

	<img id="detail_image" src="images/unknow.jpg" alt="" />
	<!--<label id="detail_label"></label>-->
	<textarea id="detail_textarea" readonly></textarea>

	<div id="fields"></div>

	<div id="search_bar">
		<input class="textfield" id="keyword" type="text" placeholder="Enter Keyword" value="" />
		<button class="button" id="search" onmouseup="search()">Search</button>
		<div id="content">
			<div id="result"></div>
		</div>
		<label class="page_label">Page 0 / Total 0 Pages</label>
		<div id="page_button" style="display:none">
			<button class="btn" id="prePage" onclick="prePage()">Previous Page</button>
			<button class="btn" id="nextPage" onclick="nextPage()">Next Page</button>
		</div>
	</div>

	<div id="popMenu">
		<ul>
			<li>Change Position
				<ul>
					<li>Face-up Attack</li>
					<li>Face-up Defense</li>
					<li>Face-down Defense</li>
					<li>Face-down Attack</li>
				</ul>
			</li>
			<li>Don't Remove from Play</li>
			<li>Remove from Play</li>
			<li>Add Continuous Effect Target</li>
			<li>Delete Continuous Effect Target</li>
			<li>Set Equip Target</li>
			<li>Delete Equip Target</li>
			<li>Place Counter</li>
			<li>Change Values
				<ul>
					<li>Change Attack
						<ul>
							<li>Set Attack</li>
							<li>Set Original Attack</li>
						</ul>
					</li>
					<li>Change Defense
						<ul>
							<li>Set Defense</li>
							<li>Set Original Defense</li>
						</ul>
					</li>
					<li>Set Monster Level</li>
				</ul>
			</li>
			<li>Adjust Order</li>
		</ul>
	</div>
	<div id="show_list_dialog" title="Adjust Order">
		<ul id="sortable"></ul>
	</div>


	<div id="add_counter_dialog" title="Place Counter">
		<div id="counterSelectors"></div>
		<button class="btn" onclick="addCounterSelector()">Add Another Counter Type</button>
	</div>

	<input type="hidden" id="single_name" name="name">
	<input type="hidden" id="single_script" name="script">
	<img id="downloadButton" title="Download Puzzle" src="images/download.png" />

	<img id="settingButton" title="Advanced Settings" src="images/setting.png" />

	<div id="setting_dialog" title="Advanced Settings">
		<p>
			<label for="name">AI Name</label>
			<input type="text" id="AI_name" class="text ui-widget-content ui-corner-all" />
			<label>Message Prompt</label>
		<div id="HintMsg"></div>
		<button class="btn" onclick="addHintMsg()">Add Message</button></br>
		<button class="btn" onclick="addHintMsg()">Add Message</button><br>
		<input type="checkbox" id="check_shuffle" /> Check this option to prevent shuffling in-game from changing the
		original order
	</div>

	<div id="upload_div" title="Upload Puzzle">
		<input type="file" id="upload" onchange="upload(this.files)" />
		<div id="test" style="display:none"></div>
	</div>


	<div class="box_wrap">

		<div class="box_main">
			<ul id="menu">
				<li>
					<a href="javascript:void(0);"><img src="images/faq.png" />Instructions</a>
					<ul>
						<li><a href="http://tieba.baidu.com/p/2195212368" target="_blank">YGOcore Bar</a></li>
					</ul>
				</li>
				<li>
					<a href="javascript:void(0);"><img src="images/links.png" />Friendly Links</a>
					<ul>
						<li><a href="http://ygocore.ys168.com/" target="_blank">Editor Sharing Address</a></li>
					</ul>
				</li>
				<li>
					<a href="javascript:void(0);"><img src="images/contact.png" />Contact Author</a>
					<ul>
						<li>Author QQ: 350002947</li>
						<li>Puzzle Editor Discussion Group: 181175613</li>
					</ul>
				</li>
			</ul>
		</div><!--box_main end-->

		<div class="box_button"><a style="display:block;" href="#" id="box_link"><img id="box_img" src="images/qm.png"
					width="50" height="50" border="0" /></a></div>

	</div>


</body>

</html>